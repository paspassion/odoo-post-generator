<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Générateur de posts</title>
  <script defer>
    async function genererPosts() {
      const mois = document.getElementById("mois").value;
      const annee = document.getElementById("annee").value;
      const reseaux = Array.from(document.querySelectorAll('input[name="reseau"]:checked')).map(e => e.value);

      const response = await fetch("/api/genere-post", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ mois, annee, reseaux })
      });

      const data = await response.json();
      const output = document.getElementById("resultats");
      output.innerHTML = "";

      for (const [reseau, post] of Object.entries(data.postages)) {
        output.innerHTML += `<h3>${reseau}</h3><p>${post.texte}</p><p>${post.hashtags.join(" ")}</p><hr/>`;
      }
    }
  </script>
</head>
<body style="font-family: sans-serif; max-width: 600px; margin: auto;">
  <h1>Générateur de posts réseaux sociaux</h1>
  <label for="mois">Choisis un mois :</label>
  <select id="mois">
    <option>Août</option>
  </select>
  <br/><br/>
  <label for="annee">Choisis une année :</label>
  <select id="annee">
    <option>2025</option>
  </select>
  <br/><br/>
  <label>Réseaux sociaux :</label><br/>
  <label><input type="checkbox" name="reseau" value="Facebook"/> Facebook</label><br/>
  <label><input type="checkbox" name="reseau" value="Instagram"/> Instagram</label><br/>
  <label><input type="checkbox" name="reseau" value="LinkedIn"/> LinkedIn</label><br/>
  <label><input type="checkbox" name="reseau" value="TikTok"/> TikTok</label><br/><br/>
  <button onclick="genererPosts()">Générer les posts</button>
  <div id="resultats" style="margin-top: 20px;"></div>
</body>
</html>
